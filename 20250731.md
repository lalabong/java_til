# 브라우저 주소창에 'www.google.com' 입력 시 발생하는 전체 과정

브라우저에서 URL을 입력하는 순간부터 페이지가 화면에 렌더링되기까지의 과정을 단계별로 정리해보겠습니다.

## 1. URL 파싱 및 검증

### 브라우저의 첫 번째 처리

```
입력값: www.google.com
↓
파싱 결과:
- 프로토콜: https:// (기본값, 생략됨)
- 호스트: www.google.com
- 포트: 443 (HTTPS 기본값)
- 경로: / (생략됨)
```

**브라우저가 하는 일:**

- URL 형식 검증
- 프로토콜 추론 (HTTP/HTTPS)
- 특수문자 인코딩 처리
- 북마크, 히스토리, 검색 제안 확인


## 2. DNS 조회 (Domain Name System)

### 도메인을 IP 주소로 변환

```
www.google.com → 142.250.196.164
```

**DNS 조회 순서:**

1. **브라우저 캐시** 확인
2. **OS 캐시** 확인
3. **로컬 hosts 파일** 확인
4. **라우터 DNS 캐시** 확인
5. **ISP DNS 서버** 조회
6. **루트 DNS 서버** → **TLD 서버(.com)** → **구글 DNS 서버**

### 실제 DNS 조회 과정

```
브라우저 → 로컬 DNS → 루트 서버 → .com 서버 → google.com 서버
                                                    ↓
                                              IP 주소 반환
```


## 3. TCP 연결 설정 (3-Way Handshake)

### 서버와의 연결 수립

```
클라이언트 → SYN → 서버
클라이언트 ← SYN+ACK ← 서버  
클라이언트 → ACK → 서버
```

**포트 정보:**

- HTTP: 80번 포트
- HTTPS: 443번 포트 (구글은 HTTPS 강제)


## 4. TLS/SSL 핸드셰이크 (HTTPS인 경우)

### 보안 연결 설정

```
1. 클라이언트 Hello (지원 암호화 방식 전송)
2. 서버 Hello + 인증서 전송
3. 인증서 검증 (CA 확인)
4. 키 교환 및 암호화 방식 합의
5. 보안 연결 설정 완료
```


## 5. HTTP 요청 전송

### 브라우저가 보내는 HTTP 요청

```http
GET / HTTP/1.1
Host: www.google.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) Chrome/120.0.0.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: ko-KR,ko;q=0.8,en-US;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate, br
Connection: keep-alive
Upgrade-Insecure-Requests: 1
```


## 6. 서버 처리 및 응답

### 구글 서버의 처리 과정

1. **로드 밸런서**에서 요청 분산
2. **웹 서버**(nginx/Apache)에서 요청 수신
3. **애플리케이션 서버**에서 비즈니스 로직 처리
4. **데이터베이스** 조회 (필요시)
5. **HTML 생성** 및 응답 준비

### HTTP 응답

```http
HTTP/1.1 200 OK
Content-Type: text/html; charset=UTF-8
Content-Length: 13000
Set-Cookie: session_id=abc123; HttpOnly; Secure
Cache-Control: private, max-age=0
Server: gws

<!DOCTYPE html>
<html>
<head>
    <title>Google</title>
    ...
</head>
<body>
    <div id="search-form">...</div>
</body>
</html>
```


## 7. 브라우저 렌더링 과정

### DOM 생성 및 렌더링

```
HTML 파싱 → DOM 트리 생성
    ↓
CSS 파싱 → CSSOM 트리 생성  
    ↓
Render 트리 생성 (DOM + CSSOM)
    ↓
Layout (Reflow) - 요소 위치 계산
    ↓
Paint - 실제 픽셀로 그리기
    ↓
Composite - 레이어 합성
```


### 추가 자원 로딩

```
HTML 파싱 중 발견되는 자원들:
- CSS 파일 → 별도 HTTP 요청
- JavaScript 파일 → 별도 HTTP 요청  
- 이미지 파일 → 별도 HTTP 요청
- 폰트 파일 → 별도 HTTP 요청
```


## 8. JavaScript 실행

### 브라우저 JavaScript 엔진 동작

1. **파싱**: JavaScript 코드를 AST로 변환
2. **컴파일**: 바이트코드 또는 기계어로 변환
3. **실행**: DOM 조작, 이벤트 리스너 등록
4. **비동기 처리**: AJAX 요청, 타이머 등

## 전체 과정 시간 분석

### 일반적인 로딩 시간 분포

```
DNS 조회: 20-120ms
TCP 연결: 50-200ms  
TLS 핸드셰이크: 100-300ms
서버 응답: 100-500ms
HTML 파싱: 50-200ms
자원 로딩: 200-1000ms
렌더링: 50-300ms
──────────────────
총 소요시간: 570-2620ms
```


## 최적화 기법들

### 성능 향상을 위한 기술들

- **DNS 프리페칭**: `<link rel="dns-prefetch" href="//fonts.googleapis.com">`
- **HTTP/2 멀티플렉싱**: 여러 요청 동시 처리
- **CDN 활용**: 지리적으로 가까운 서버에서 응답
- **캐싱**: 브라우저, 프록시, 서버 단계별 캐시
- **압축**: gzip, brotli 압축으로 전송량 절약
- **코드 스플리팅**: 필요한 JavaScript만 우선 로드


## 느낀 점 및 마무리

브라우저에 URL을 입력하는 단순해 보이는 행동 뒤에는 **네트워크, 보안, 렌더링** 등 복잡한 과정들이 얽혀있습니다. 각 단계별 최적화가 전체 사용자 경험에 큰 영향을 미치기 때문에, 웹 개발자라면 이 전체 과정을 이해하고 있어야 성능 최적화와 문제 해결에 도움이 됩니다.

현대의 웹 브라우저는 이 모든 과정을 수백 밀리초 내에 완료하여 사용자에게 빠른 웹 경험을 제공합니다.

