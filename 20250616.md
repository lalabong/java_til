## Security
- Spring Security는 스프링 기반 애플리케이션의 보안(인증과 권한, 인가 등)을 담당하는 스프링 프레임워크이다.
- Security는 인증과 권한에 대한 부분을 Filter의 흐름에 따라서 처리를 하며, 보안과 관련된 옵션을 체계적으로 제공하므로 개발자가 일일이 보안과 관련된 로직을 작성하지 않아도 되는 장점을 가지고 있다.

### Security 기능
1. 인증 및 접근 제어

   사용자의 인증과 접근 제어를 처리하여 인증되지 않는 액세스를 방지한다. 사용자의 자
   격 증명을 확인하고 권한 부여 및 접근 권한 검사를 수행하여 인가된 사용자만 보호된 리
   소스에 액세스가 가능하다.
2. CSRF(Cross-Site-Rquest Forgery) 방어

   csrf 공격을 방지하기 위해 요청에 csrf 토큰을 추가하고, 이를 사용하여 유효한 요청인
   지 검증을 하게 된다. 이를 통해 악성 사용자의 요청 위조를 방지할 수 있다.
3. XSS(Cross-Site Scripting) 방어

   XSS 공격을 방지하기 위해 출력 데이터의 이스케이프 처리를 제공하고 있으며 이를 통
   해 악성 스크립트가 삽입되는 것을 방지하고 사용자의 브라우저에서 안전하게 실행을
   보장한다.
4. 세션 관리

   Spring Security는 세션 관리를 통해 세션 하이재킹 및 세션 고정 공격을 방지한다. 적
   절한 세션 id 생성, 세션 유효성 검사, 세션 제한 시간 설정 등의 기능을 제공하여 세션의
   안전성을 강화한다.
5. 보안 헤더 설정

   Spring Security는 보안 헤더를 설정하여 다양한 보안 취약점을 방지한다. Content
   Security Policy (CSP), X-Content-Type-Options, X-XSS-Protection 등의 헤더
   를 설정하여 악성 스크립트 실행, mime 타입 스니핑을 방지한다.
6. 로그인 실패 및 계정 잠금

   Spring Security는 로그인 실패 횟수 제한, 계정 잠금 등의 기능을 제공하여 무차별 대
   입 공격 및 계정 탈취를 방지한다.
7. 보안 취약점 패치

   보안 취약점에 대한 업데이트와 패치를 지속적으로 제공하여 애플리케이션의 보안을 유
   지하고 개선한다. 취약점에 대한 경고 및 권장 사항을 제공하여 개발자가 적절한 조치를
   취할 수 있도록 한다.

### Security architecture
1. 사용자의 로그인 요청
2. AuthenticationFilter에서 사용자의 아이디와 비밀번호를 기반으로
   UserPasswordAuthentiactionToken 발행
3. 생성된 AuthenticationManager에 전달
4. AuthenticationManager 등록된 AuthenticationProvider에 사용자 정보 조회 요청
5. UserDetailsService에서 사용자의 정보를 조회하고, UserDetails에 정보를 저장하여
   반환
6. 조회 시 입력된 username을 기반으로 조회
7. AuthenticationProvider에 조회된 사용자의 username, password를 비교
8. 일치하는 경우 AuthenticationManager에 객체 반환
9. 해당 인증 정보를 SecurityContextHolder에 저장

## 웹 해킹 종류
1. CSRF (Cross-Site Request Forgery)
    -  악의적인 사용자가 피해자의 인증된 세션을 이용하여 비정상적인 요청을 실행하는
   공격 형태이다.
   - 공격자는 사용자가 이미 인증된 세션을 가지고 있을 때, 피해자가 의도하지 않은 동
   작을 수행하도록 요청을 위조한다.
1-1.  Security의 CSRF 공격 방지를 위한 기능
-  CSRF 토큰
  - CSRF 토큰을 포함해 위조된 요청인지 확인한다.
    - (서버는 요청을 처리하기 전에 토큰의 일치 여부를 확인하여, 일치하지 않는 경우 요청을 거부)
- CSRF 헤더
  - X-CSRF-Token 이라는 이름의 헤더를 요청에 추가하여 CSRF 공격을 방지한다.(클라이언트는 서버에서 받은 토큰을 헤더에 포함해 요청 시 전송하며 서버는 이를 확인하여 변조를 확인)
- CSRF 보호 설정 
  - CSRF 보호 설정을 활성화할 수 있으며 이를 통해 기본적인 CSRF 보호 기능을 제공하여, 토큰 생성, 토큰 저장소, 토큰 전송 방식 등을 구성할 수 있다.

2.  XSS
- SQL INJECTION과 함께 웹상에서 가장 기초적인 취약점 공격 방법의 일종으로, 악의적인 사용자가 공격하려는 사이트에 스크립트를 넣는 기법이다.
- 공격에 성공하면 사이트에 접속한 사용자는 삽입된 코드를 실행하게 되어 의도하지 않은 행동을 수행하게 되거나 쿠키 및 세션 등 민감한 정보를 탈취 당하게 된다.
-  크로스 사이트 스크립팅은 자바스크립트를 사용하여 공격하는 경우가 많으며, 공격 방법이 단순하고 가장 기초적이다. 하지만 많은 웹사이트가 xss에 대한 방어 조치를 하지 않아, 공격 받는 경우가 많으며 여러 사용자가 접근할 수 있는 게시판 등에 코드를 삽입하는 방식인 경우가 많다. 때에 따라서는 메일과 같은 매체를 통해서 전파된다.

3. 세션 하이제킹
- 세션 하이재킹 또는 세션 도용이라 불리는 공격은 공격자가 컴퓨터 네트워크에서 사용자의 세션을 장악하려고 시도하는 보안 공격이다.
- 이 공격에서 공격자는 인증 및 세션 관리에 사용되는 세션 토큰 또는 세션 식별자를 가로채고 조작하여 사용자 세션에 대한 무단 액세스 권한을 얻는 것을 목표로 한다.

4. 세션 고정 공격
- 공격자가 미리 결정된 세션 식별자 또는 세션 토큰을 사용하도록 사용자를 속이는 보안 공격 유형이다.
- 이 공격은 사용자에게 공격자가 제어하는 세션으로 인증하도록 강제하여 사용자의 브라우저와 웹 응용 프로그램 간의 신뢰를 악용하는 것이다.



## 느낀 점
- 시큐리티...뭔가 많고 복잡하고 어렵다...공부할게 매번 쏟아지고 난 피할 수 없고 즐겨야지...